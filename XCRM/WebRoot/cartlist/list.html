<script>
	$(function() {
		$('.create.btn.btn-primary').on('click', function() {
			location.href = '/search/';
		});
		$('.del-item').on('click', function() {
			var that = $(this);
			var id = that.attr('data');
			$.ajax({
				type : "get",
				url : '/cartlist/remove?id=' + id,
				success : function(data, status) {
					if (status == "success") {
						that.parents('tr').empty();
					}
				}
			});
		});
		var amount = 0;
		for (var i = 0; i < $('.sum').length; i++) {
			amount += parseInt($($('.sum')[i]).html());
		}
		$('.amount').html(amount);
	});
</script>

<table class="table table-striped table-hover" data-show-refresh="true"
	data-show-columns="true" data-search="true"
	data-query-params="queryParams" data-toolbar=".toolbar"
	data-pagination="true" data-show-toggle="true">
	<thead>
		<tr>
			<th data-field="name">图片</th>
			<th data-field="name">产品名称</th>
			<th data-field="city">数量</th>
			<th data-field="name">价格</th>
			<th data-field="name">小计</th>
			<th data-field="action" data-align="center"
				data-formatter="actionFormatter" data-events="actionEvents">操作</th>
			<#list list as item>
		<tr>
			<input type="hidden" value="${item.id}" class="itemid"/>
			<td><img width="80px" height="80px"
				src='${(item.filename??)?string((prdimg_path+"/"+item.pid+"/"+((item.filename!"")?split(","))[0]),"/img/placehold.jpg")}' />
			</td>
			<td>${item.name}</td>
			<td>${item.num}</td>
			<td>${item.price}</td>
			<td class="sum">${item.price*item.num}</td>
			<td><a class="del-item" data="${item.id}"
				href="javascript:void(0);">删除</a></td>
		</tr>
		</#list>
		</tr>
	</thead>
</table>
<div class="col-md-12"
	style="text-align: left; padding: 10px; height: 70px; border: 1px solid #ddd">
	<div class="col-md-1"
		style="float: right; font-size: 18px; background-color: #df3033; text-align: center;">
		<a id="payment" class="sc-btn">去结算</a>
	</div>
	<div class="col-md-2"
		style="float: right; text-align: right; font-weight: bold">
		<span>总价:</span><span class="amount"
			style="color: #df3033; font-size: 18px"></span>
	</div>

</div>